<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <title>统计</title>
    <script type="text/javascript" th:src="@{../static/jquery.js}"></script>
    <script type="text/javascript" th:src="@{../static/echarts.js}"></script>
</head>
<style>
    html,
    body,
    #container {
        width: 100%;
        height: 100%;
        margin: 0px;
    }

    #loadingTip {
        position: absolute;
        z-index: 9999;
        top: 0;
        left: 0;
        padding: 3px 10px;
        background: red;
        color: #fff;
        font-size: 14px;
    }
</style>
</head>

<body>
<div id="day" style="width: 50%;height:50%;float:left;"></div>
<div id="week" style="width: 50%;height:50%;float:left;"></div>
<div id="distanceCalc" style="width: 50%;height:50%;float: left;"></div>
<div id="month" style="width: 50%;height:50%;float: left;"></div>
<script type="text/javascript" th:inline="javascript">

    let day = document.getElementById('day');
    let dayChart = echarts.init(day);
    let dayOption;

    let dayTime = [[${dayTime}]];
    let dayValue = [[${dayValue}]];

    dayOption = {
        title: {
            text: '当天里程'
        },
        xAxis: {
            type: 'category',
            data: dayTime
        },
        yAxis: {
            type: 'value'
        },
        dataZoom: [
            {
                type: "slider",
                show: true,
                start: 0,
                end: 30,
                xAxisIndex: [0],
            }
        ],
        series: [
            {
                data: dayValue,
                type: 'bar',
                showBackground: true,
                backgroundStyle: {
                    color: 'rgba(180, 180, 180, 0.2)'
                }
            }
        ]
    };
    dayOption && dayChart.setOption(dayOption);


    let week = document.getElementById('week');
    let weekChart = echarts.init(week);
    let weekOption;

    let weekTime = [[${weekTime}]]
    let weekValue = [[${weekValue}]]

    weekOption = {
        title: {
            text: '本周'
        },
        dataZoom: [
            {
                type: "slider",
                show: true,
                start: 0,
                end: 30,
                xAxisIndex: [0],
            }
        ],
        xAxis: {
            type: 'category',
            data: weekTime
        },
        yAxis: {
            type: 'value'
        },
        series: [
            {
                data: weekValue,
                type: 'bar',
                showBackground: true,
                backgroundStyle: {
                    color: 'rgba(180, 180, 180, 0.2)'
                }
            }
        ]
    };
    weekOption && weekChart.setOption(weekOption);


    let monthDom = document.getElementById('month');
    let monthChart = echarts.init(monthDom);
    let monthOption;
    let monthTime = [[${monthTime}]]
    let monthValue = [[${monthValue}]]

    monthOption = {
        title: {
            text: '本月里程'
        },
        dataZoom: [
            {
                type: "slider",
                show: true,
                start: 0,
                end: 30,
                xAxisIndex: [0],
            }
        ],
        xAxis: {
            type: 'category',
            data: monthTime
        },
        yAxis: {
            type: 'value'
        },
        series: [
            {
                data: monthValue,
                type: 'bar',
                showBackground: true,
                backgroundStyle: {
                    color: 'rgba(180, 180, 180, 0.2)'
                }
            }
        ]
    };
    monthOption && monthChart.setOption(monthOption);


    let chartDom = document.getElementById('distanceCalc');
    let myChart = echarts.init(chartDom);
    let option;

    let distanceCalc = [[${distanceCalc}]]

    option = {
        tooltip: {
            trigger: 'item'
        },
        legend: {
            top: '5%',
            left: 'center'
        },
        series: [
            {
                name: 'Access From',
                type: 'pie',
                radius: ['40%', '70%'],
                avoidLabelOverlap: false,
                label: {
                    show: false,
                    position: 'center',
                    normal: {
                        formatter: '{b}:{c}:({d}%)',
                        textStyle: {
                            fontWeight: 'normal',
                            fontSize: 15
                        }
                    }
                },
                emphasis: {
                    label: {
                        show: true,
                        fontSize: '40',
                        fontWeight: 'bold'
                    }
                },
                labelLine: {
                    show: false
                },
                // data: [
                //     { value: 1048, name: 'Search Engine' },
                //     { value: 735, name: 'Direct' },
                //     { value: 580, name: 'Email' },
                //     { value: 484, name: 'Union Ads' },
                //     { value: 300, name: 'Video Ads' }
                // ]
                data: distanceCalc
            }
        ]
    };

    option && myChart.setOption(option);
</script>
</body>
</html>